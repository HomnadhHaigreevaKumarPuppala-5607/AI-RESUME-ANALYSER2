<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Resume Analyzer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0f1a;
  --card:#12182b;
  --accent:#FF2E63;
  --accent2:#2F81F7;
  --success:#22c55e;
  --danger:#ef4444;
  --text:#ffffff;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins', system-ui, sans-serif;
}

body{
  background:radial-gradient(circle at top,#16203f,#0b0f1a);
  color:var(--text);
  min-height:100vh;
}

header{
  padding:24px 40px;
  font-size:28px;
  font-weight:700;
  letter-spacing:1px;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:30px;
}

.card{
  background:linear-gradient(145deg,#141a33,#0e1325);
  border-radius:18px;
  padding:32px;
  box-shadow:
    0 0 30px rgba(255,46,99,.35),
    0 0 80px rgba(255,46,99,.2);
}

/* Upload */
.upload-box{
  border:2px dashed var(--accent2);
  border-radius:16px;
  padding:42px;
  text-align:center;
  cursor:pointer;
  transition:.3s ease;
  width:100%;
}

.upload-box:hover{
  background:rgba(122,162,255,.08);
}

.upload-box input{display:none}

.file-name{
  margin-top:12px;
  font-size:14px;
  opacity:.85;
}

/* Dropdown */
.dropdown{
  margin-top:28px;
  position:relative;
}

.dropdown-btn{
  background:#0b1022;
  padding:16px;
  border-radius:14px;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  transition:.25s;
}

.dropdown-btn:hover{
  box-shadow:
    0 0 10px rgba(255,46,99,.5);
}

.dropdown-list{
  position:absolute;
  top:115%;
  left:0;
  width:100%;
  background:#0b1022;
  border-radius:14px;
  overflow:hidden;
  max-height:0;
  transition:max-height .35s ease;
  z-index:20;
}

.dropdown-list.active{
  max-height:420px;
}

.dropdown-item{
  padding:14px 16px;
  cursor:pointer;
  transition:.2s;
}

.dropdown-item:hover{
  background:rgba(255,46,99,.15);
}

/* Button */
button{
  margin-top:32px;
  width:100%;
  padding:16px;
  font-size:18px;
  font-weight:600;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  cursor:pointer;
  color:white;
}

button:hover{
  box-shadow:
    0 0 18px rgba(47,129,247,.6);
}

/* Loader */
.loader{
  text-align:center;
  margin-top:28px;
  display:none;
}

.loader span{
  width:12px;
  height:12px;
  background:var(--accent);
  border-radius:50%;
  display:inline-block;
  margin:0 5px;
  animation:bounce 1.2s infinite ease-in-out;
}

.loader span:nth-child(2){animation-delay:.2s}
.loader span:nth-child(3){animation-delay:.4s}

@keyframes bounce{
  0%,80%,100%{transform:scale(0)}
  40%{transform:scale(1)}
}

/* Results */
.results{
  display:none;
  margin-top:40px;
}

.result-card{
  background:var(--card);
  border-radius:16px;
  padding:24px;
  margin-bottom:18px;
}

.result-card h3{
  margin-bottom:10px;
  color:var(--accent);
}

.chips span{
  display:inline-block;
  padding:8px 14px;
  border-radius:20px;
  margin:6px;
  font-size:14px;
}

.have{background:var(--success)}
.miss{background:var(--danger)}

.score{
  text-align:center;
  font-size:54px;
  font-weight:700;
  color:var(--accent2);
}

.salary{
  font-size:22px;
  color:#ffd166;
}/* REMOVE BROWSER FOCUS OUTLINE (FIXES BLUE DASHED BOX) */
.upload-box:focus,
.upload-box:focus-within,
:focus,
:focus-visible {
  outline: none !important;
}
</style>
</head>

<body>

<header>AI RESUME ANALYSER</header>

<div class="container">
  <div class="card">

    <div class="upload-box" onclick="triggerFile()">
  ðŸ“„ Click to Upload Resume
  <div class="file-name" id="fileName">No file selected</div>
</div>

<input type="file" id="resume" hidden>


    <div class="dropdown">
      <div class="dropdown-btn" onclick="toggleDropdown()">
        <span id="selectedRole">Select Job Role</span> âŒ„
      </div>
      <div class="dropdown-list" id="dropdownList">
        <div class="dropdown-item">WEB DEVELOPMENT</div>
        <div class="dropdown-item">SOFTWARE</div>
        <div class="dropdown-item">IT</div>
        <div class="dropdown-item">BIGDATA</div>
        <div class="dropdown-item">ARTIFICIAL INTELLIGENCE & MACHINE LEARNING</div>
        <div class="dropdown-item">ARTIFICIAL INTELLIGENCE & DATA SCIENCE</div>
      </div>
    </div>

    <button onclick="analyzeResume()">Analyze Resume</button>

    <div class="loader" id="loader">
      <span></span><span></span><span></span>
    </div>

    <div class="results" id="results">
      <div class="result-card"><div class="score" id="score">0%</div></div>
      <div class="result-card"><h3>Skills You Have</h3><div class="chips" id="have"></div></div>
      <div class="result-card"><h3>Skills Needed</h3><div class="chips" id="miss"></div></div>
      <div class="result-card"><h3>Grammar Issues</h3><p id="grammar"></p></div>
      <div class="result-card"><h3>Improvement Tips</h3><p id="tips"></p></div>
      <div class="result-card"><h3>Expected Salary</h3><p class="salary" id="salary"></p></div>
    </div>

  </div>
</div>

<script>
const resumeInput=document.getElementById("resume");
const fileName=document.getElementById("fileName");
const dropdownList=document.getElementById("dropdownList");
const selectedRoleText=document.getElementById("selectedRole");
const loader=document.getElementById("loader");
const results=document.getElementById("results");
const have=document.getElementById("have");
const miss=document.getElementById("miss");
const grammar=document.getElementById("grammar");
const tips=document.getElementById("tips");
const salary=document.getElementById("salary");
const score=document.getElementById("score");

let selectedRole="";

resumeInput.addEventListener("change",()=>{
  fileName.textContent = resumeInput.files[0]
    ? "Selected: " + resumeInput.files[0].name
    : "No file selected";
});

function toggleDropdown(){
  dropdownList.classList.toggle("active");
}

document.querySelectorAll(".dropdown-item").forEach(item=>{
  item.onclick=()=>{
    selectedRole=item.textContent;
    selectedRoleText.textContent=selectedRole;
    dropdownList.classList.remove("active");
  }
});

const jobSkills={
  "WEB DEVELOPMENT":["HTML","CSS","JavaScript","React","Node.js","Git"],
  "SOFTWARE":["Java","Python","OOP","DSA","Git","Testing"],
  "IT":["Networking","Linux","Cloud","Security"],
  "BIGDATA":["Hadoop","Spark","Kafka","SQL"],
  "ARTIFICIAL INTELLIGENCE & MACHINE LEARNING":["Python","ML","DL","TensorFlow","NLP"],
  "ARTIFICIAL INTELLIGENCE & DATA SCIENCE":["Python","Statistics","ML","SQL","PowerBI"]
};
function triggerFile(){
  document.getElementById("resume").click();
}


async function analyzeResume(){
  if(!resumeInput.files[0]) return alert("Upload resume first");
  if(!selectedRole) return alert("Select job role");

  loader.style.display = "block";
  results.style.display = "none";

  // âœ… READ FILE CONTENT
  const resumeText = await resumeInput.files[0].text();

  try {
    const response = await fetch("https://ai-resume-analyser1-8w55.onrender.com/api/analyze", {
 
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        resume: resumeText,
        job: selectedRole
      })
    });

    if (!response.ok) {
      throw new Error("Server error");
    }

    const data = await response.json();

    loader.style.display = "none";
    results.style.display = "block";

    have.innerHTML = data.found_skills
      .map(s => `<span class="have">${s}</span>`).join("");

    miss.innerHTML = data.missing_skills
      .map(s => `<span class="miss">${s}</span>`).join("");

    grammar.textContent = data.grammar;
    tips.textContent = data.tips;
    salary.textContent = data.salary;
    score.textContent = data.score + "%";

  } catch (err) {
    loader.style.display = "none";
    alert("Backend not responding");
    console.error(err);
  }
}
</script>

</body>
</html>

